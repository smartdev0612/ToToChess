var clock={time_str:'',time:'',callback:'',init:function(t){this.time_str=t;},update:function(t){if(t>this.time_str){this.time_str=t;}},set_callback:function(callback){this.callback=callback;},play:function(){if(!this.time_str)return;var curtime=this.parse(this.time_str);curtime.setSeconds(curtime.getSeconds()+1);this.time_str=this.dateToString(curtime);this.time=curtime;eval(this.callback);oop=setTimeout("clock.play()",1000);},timeAdd:function(time_str,sec){var curtime=this.parse(time_str);curtime.setSeconds(curtime.getSeconds()+sec);return this.dateToString(curtime);},getRemainTime:function(endtime){var curtime=this.parse(this.time_str);var t=this.parse(endtime);var re=t-curtime;return re;},lpad:function(n,width,z){z=z||'0';n=n+'';return n.length>=width?n:new Array(width-n.length+1).join(z)+n;},parse:function(str){var parts=str.split(' ');var dateparts=parts[0].split('-');var timeparts=parts[1].split(':');if((dateparts.length==3)&&(timeparts.length==3))
return new Date((dateparts[0]),(dateparts[1]?dateparts[1]-1:0),(dateparts[2]),(timeparts[0]),(timeparts[1]),(timeparts[2]));},dateToString:function(sdate){yy=sdate.getFullYear();mm=sdate.getMonth()+1;dd=sdate.getDate();h=sdate.getHours();m=sdate.getMinutes();s=sdate.getSeconds();mm=this.lpad(mm,2);dd=this.lpad(dd,2);h=this.lpad(h,2);m=this.lpad(m,2);s=this.lpad(s,2);return""+yy+"-"+mm+"-"+dd+" "+h+':'+m+':'+s;},secToString:function(milli_second){var sec=milli_second/1000;var s=sec%60;var m=(sec-s)/60;return this.lpad(m,2)+":"+this.lpad(s,2);},timestampToString:function(ts){return this.dateToString(new Date(ts*1000));}}